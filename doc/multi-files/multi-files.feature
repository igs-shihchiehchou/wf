# language: zh-TW
Feature: multi-files
  作為 使用者
  我希望 可以同時讀取超過一個音效檔案
  以便 快速編輯多個音效檔案

  Background:
    Given 使用者已開啟音效編輯工具
    And 產生一個 音訊輸入 node

  # ============================================
  # Scenario 1: 上傳多個檔案
  # ============================================
  Scenario: 成功上傳多個音效檔案
    When 使用者選擇多個音效檔案（例如 3 個 WAV 檔案）
    Then 所有檔案成功載入
    And 每個檔案顯示在檔案列表中
    And 顯示檔案總數

  # ============================================
  # Scenario 2: 節點預覽區域顯示
  # ============================================
  Scenario: 節點上顯示多個預覽區域
    Given 使用者已上傳多個音效檔案
    When 展開預覽頁簽
    Then 節點上顯示多個預覽區域
    And 每個預覽區域顯示對應的檔案名稱
    And 每個預覽區域顯示音訊波形圖

  # ============================================
  # Scenario 3: 預覽頁簽預設狀態
  # ============================================
  Scenario: 單一檔案時預覽頁簽預設開啟
    Given 使用者已上傳 1 個音效檔案
    Then 預覽頁簽預設為開啟狀態
    And 直接顯示該檔案的預覽區域

  Scenario: 多個檔案時預覽頁簽預設關閉
    Given 使用者已上傳超過 1 個音效檔案
    Then 預覽頁簽預設為關閉狀態
    And 節點僅顯示檔案數量摘要
    When 點擊預覽頁簽按鈕
    Then 展開預覽區域顯示所有檔案

  # ============================================
  # Scenario 4: 檔案超過 5 個時分頁顯示
  # ============================================
  Scenario: 預覽區域分頁功能
    Given 使用者已上傳超過 5 個音效檔案（例如 8 個）
    And 展開預覽頁簽
    Then 預覽區域每頁最多顯示 5 個檔案
    And 顯示分頁資訊（如「第 1 頁，共 2 頁」）
    And 顯示「下一頁」按鈕
    When 點擊「下一頁」按鈕
    Then 顯示第 6 至第 8 個檔案的預覽
    And 顯示「上一頁」按鈕

  # ============================================
  # Scenario 5: 下載處理後的多個檔案
  # ============================================
  Scenario: 下載多檔案為壓縮檔
    Given 使用者已上傳多個音效檔案
    And 已設計完成工作流
    When 按下下載按鈕
    Then 所有處理後的檔案被打包成一個壓縮檔（ZIP 格式）
    And 自動下載該壓縮檔

  # ============================================
  # Scenario 6: 部分檔案處理失敗
  # ============================================
  Scenario: 部分檔案格式不支援
    Given 使用者選擇的檔案中包含不支援的格式
    When 上傳檔案
    Then 顯示錯誤訊息指出哪些檔案無法處理
    And 支援的檔案仍可正常載入

